(function(c){function s(a){a=a.elements;for(var b={},d=0;d<a.length;d++){var c=a[d];!t.test(c.tagName)||!c.name||u.test(c.type)||c.disabled||v.test(c.type)&&!c.checked||(b[c.name]=c.value)}for(var e in g)b[e]=g[e];g={};return b}function m(a,b){for(var c=null;a;){if(a.getAttribute){var f=a.getAttribute("data-navigation");c||a.tagName!==b||"refresh"!==f||(c=a);if("noajax"===f)return null}a=a.parentNode}return c}function k(a,b,d,f){var e=new c.XMLHttpRequest;e.onreadystatechange=n(e,b,f);e.open("get",
p(a,d));e.send()}function p(a,b){a+=0<a.indexOf("?")?"&":"?";a+="refreshajax="+c.encodeURIComponent(h);a+="&navigation="+(b?"refresh":"history");b&&(a=l(b,a,"include-current"),a=l(b,a,"current-keys"),a=l(b,a,"to-keys"));return a}function l(a,b,d){(a=a.getAttribute("data-"+d))&&(b+="&"+d.replace("-","")+"="+c.encodeURIComponent(a));return b}function n(a,b,d){var f=h;return function(){if(4===a.readyState&&200===a.status){var e=c.JSON.parse(a.responseText);e.Title||(e.Title=d?d:c.document.title);q(e,
b,f)}}}function q(a,b,d){if(a.RedirectLink)c.location.href=a.RedirectLink;else{var f=a.Link;r[d+"&"+f]=a;if(h===d){for(var e in a.Panels){d=c.document.getElementById(e);d.innerHTML=a.Panels[e];var g;"function"===typeof c.Event?g=new c.Event("refreshajax"):(g=c.document.createEvent("Event"),g.initEvent("refreshajax",!1,!1));d.dispatchEvent(g)}b&&h!==f&&c.history.pushState(a.Title,a.Title,f);c.document.title=a.Title;h=f}}}if(c.history&&c.history.pushState){var g={};c.document.addEventListener("click",
function(a){var b=a.target,d=m(b,"A");a.ctrlKey||a.shiftKey||!d||(a.preventDefault(),k(d.getAttribute("href"),!0,d));"INPUT"===b.tagName&&b.name&&("submit"===b.type&&(g[b.name]=b.value),"image"===b.type&&(g[b.name+".x"]=c.Math.max(0,a.offsetX),g[b.name+".y"]=c.Math.max(0,a.offsetY)))});c.document.addEventListener("submit",function(a){var b=m(a.target,"FORM");if(b){var d=new c.XMLHttpRequest;d.onreadystatechange=n(d,!0);a.preventDefault();d.open("post",p(b.getAttribute("action"),b));d.setRequestHeader("Content-Type",
"application/json");d.send(c.JSON.stringify(s(b)))}});var t=/^INPUT|TEXTAREA|SELECT$/,u=/^button|image|submit|reset|file$/,v=/^checkbox|radio$/,h=c.location.pathname+c.location.search,r={};c.addEventListener("popstate",function(a){var b=c.location.pathname+c.location.search;if(h!==b){var d=r[h+"&"+b];if(d)try{q(d,!1,h)}catch(f){k(b,!1,null,a.state)}else k(b,!1,null,a.state)}})}})(window);