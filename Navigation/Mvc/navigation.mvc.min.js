(function(c){function r(a){a=a.elements;for(var b={},c=0;c<a.length;c++){var d=a[c];!s.test(d.tagName)||!d.name||t.test(d.type)||d.disabled||u.test(d.type)&&!d.checked||(b[d.name]=d.value)}for(var f in g)b[f]=g[f];g={};return b}function k(a,b){if(a.tagName===b&&"refresh"===a.getAttribute("data-navigation")){for(var c=!0;a&&c;)a.getAttribute&&(c="noajax"!==a.getAttribute("data-navigation")),a=a.parentNode;return c}return!1}function l(a,b,e){var d=new c.XMLHttpRequest;d.onreadystatechange=m(d,b);d.open("get",
n(a,e));d.send()}function n(a,b){a+=0<a.indexOf("?")?"&":"?";a+="refreshajax="+c.encodeURIComponent(f);b&&b.getAttribute("data-include-current")&&(a+="&includecurrent=true");var e=b?b.getAttribute("data-current-keys"):null;e&&(a+="&currentkeys="+c.encodeURIComponent(e));return a}function m(a,b){var e=f;return function(){if(4===a.readyState&&200===a.status){var d=c.JSON.parse(a.responseText);p(d,b,e)}}}function p(a,b,e){for(var d in a.Panels){var g=c.document.getElementById(d);g.innerHTML=a.Panels[d];
var h;"function"===typeof c.Event?h=new c.Event("refreshajax"):(h=c.document.createEvent("Event"),h.initEvent("refreshajax",!1,!1));g.dispatchEvent(h)}d=a.Link;b&&f!==d&&c.history.pushState(d,c.document.title,d);q[e+"&"+d]=a;f=d}if(c.history&&c.history.pushState){var g={};c.document.addEventListener("click",function(a){var b=a.target;a.ctrlKey||a.shiftKey||!k(b,"A")||(a.preventDefault(),l(b.getAttribute("href"),!0,b));"INPUT"===b.tagName&&b.name&&("submit"===b.type&&(g[b.name]=b.value),"image"===
b.type&&(g[b.name+".x"]=c.Math.max(0,a.offsetX),g[b.name+".y"]=c.Math.max(0,a.offsetY)))});c.document.addEventListener("submit",function(a){var b=a.target;if(k(b,"FORM")){var e=new c.XMLHttpRequest;e.onreadystatechange=m(e,!0);a.preventDefault();e.open("post",n(b.getAttribute("action"),b));e.setRequestHeader("Content-Type","application/json");e.send(c.JSON.stringify(r(b)))}});var s=/^INPUT|TEXTAREA|SELECT$/,t=/^button|image|submit|reset|file$/,u=/^checkbox|radio$/,f=c.location.pathname+c.location.search,
q={};c.addEventListener("popstate",function(a){a=c.location.pathname+c.location.search;if(f!==a){var b=q[f+"&"+a];b?p(b,!1,a,f):l(a,!1)}})}})(window);