<html>
<head>
    <title>Reusable Components</title>
    <meta name="viewport" content="width=device-width">
    <style>
      :root {
        --primary-color: #f9858b;
        --secondary-color: #ed335f;
      }    
    </style>
    <link rel="stylesheet" href="../css/prism.css">
    <link rel="stylesheet" href="../css/navigation.css">
</head>
<body>
    <div id="banner">
      <a href=".."><img alt="logo" src="../img/logo.png" /></a>
      <a href="native/setup.html">React Native</a>
      <a href="https://github.com/grahammendick/navigation">GitHub</a>
    </div>
    <div id="content">
        <div id="menu">
          <h2>
            <img alt="web" src="../img/web.png" />
            React
          </h2>
          <div id="items">
            <a href="setup.html">Setup</a>
            <a href="hello-world.html">Hello World</a>
            <a href="state-navigation.html">State Navigation</a>
            <a href="navigation-data.html">Navigation Data</a>
            <a href="routes.html">Routes</a>
            <a href="current-data.html">Current Data</a>
            <a href="rsc.html">RSC</a>
            <a href="html5-history.html">HTML5 History</a>
            <a href="navigation-lifecycle.html">Navigation Lifecycle</a>
            <a href="reusable-components.html" class="selected">Reusable Components</a>
            <a href="typescript.html">TypeScript</a>
            <a href="examples.html">Examples</a>
            <h3>Mobile</h3>
            <a href="mobile/setup.html">Setup</a>
            <a href="mobile/hello-world.html">Hello World</a>
            <a href="mobile/animated-navigation.html">Animated Navigation</a>
            <a href="mobile/clean-urls.html">Clean Urls</a>
            <a href="mobile/scene-navigation-lifecycle.html">Navigation Lifecycle</a>
            <a href="mobile/shared-element-navigation.html">Shared Element Navigation</a>
            <a href="mobile/examples.html">Examples</a>
          </div>
        </div>
        <div id="article">
            <h1>Reusable Components</h1>
            <p>
                The React website says that, when designing your interface, you should "break down the common design elements into reusable components...That way, the next time you need to build some UI, you can write much less code." This idea works for elements like buttons and layout components, but falls down when it comes to navigational components like a data Sorter or Pager.
            </p>
            <p>
                Navigational components contain Hyperlinks and Hyperlinks aren't reusable because their href attributes tie them down to a particular UI. The Navigation router's data-first approach sets Hyperlinks free so you can reuse them across UIs. I'll show how by building reusable Sorter and Pager components.
            </p>
            <h2>Making a Reusable Sorter Component</h2>
            <p>
                A reusable Sorter component consists of a Hyperlink that toggles the sort order. Remember that it's just the UI we're reusing and not the sorting logic itself. With the Navigation router we think in terms of typed data rather than URLs. We'll model the sort order as a boolean called 'up'. A value of true represents a sort direction of ascending. We can then use the Navigation router's <code>RefreshLink</code> component to build a Sorter component that toggles this 'up' value:
            </p>
            <pre><code class="language-jsx">import {RefreshLink} from 'navigation-react';

const Sorter = ({up, children}) => (
  &lt;RefreshLink navigationData={{up: !up}}>
    {children}
  &lt;/RefreshLink>
);
</code></pre>
            <p>
                This Sorter component isn't tied to a particular UI because there's no mention of any URL. It's reusable because we only operate on the 'up' data instead of hard-coding the Hyperlink's href. Where the component's used in the UI determines the value of the href. For example, on one page the 'up' data might appear in the query string and on another it could be a route parameter. You can see what I mean below where this Sorter component brings order to a list of fruit and vegetables:
            </p>
            <iframe src="https://codesandbox.io/embed/navigation-sorter-on-web-0mq7uy?fontsize=14&hidenavigation=0&theme=dark"
                style="width:100%; height:350px; border:0; border-radius: 4px; overflow:hidden;"
                title="Navigation Email on Native Web"
                allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
                sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
            ></iframe>
            </p>
            <h2>Making a Reusable Pager Component</h2>
            <p>
                You've seen how the <code>RefreshLink</code> component lets us focus on the data instead of worrying about URLs. That means we can avoid hard-coding href attributes and create reusable navigational components. Let's use this technique to create a reusable Pager component. It will have 'First', 'Previous', 'Next' and 'Last' Hyperlinks that each change the current page number. For example, the 'First' Hyperlink sets the page number to 1 and the 'Previous' Hyperlink decrements the page number:
            </p>
            <pre><code class="language-jsx">const Pager = ({page, size, total}) => {
  const pages = [
    {text: 'First', page: 1},
    {text: 'Previous', page: Math.max(page - 1, 1)},
    {text: 'Next', page: Math.min(page + 1, Math.ceil(total / size))},
    {text: 'Last', page: Math.ceil(total / size)}
  ];
  return (
    &lt;div>
      {pages.map(pageInfo =>
        &lt;RefreshLink 
          navigationData={{page: pageInfo.page}}
          disableActive={true}
          key={pageInfo.text}>
          {pageInfo.text}
        &lt;/RefreshLink>
      )}
    &lt;/div>
  );
};
</code></pre>
            <p>
                Let's return to the fruit and veg example above and replace the Sorter with the Pager. Instead of using the 'up' data to sort the list, we'll use the 'page' data to split it across three pages:
            </p>
            <iframe src="https://codesandbox.io/embed/navigation-pager-on-web-y2uv53?fontsize=14&hidenavigation=0&theme=dark"
                style="width:100%; height:300px; border:0; border-radius: 4px; overflow:hidden;"
                title="Navigation Email on Native Web"
                allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
                sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
            ></iframe>
            </p>
            <h2>Using the Sorter and Pager together</h2>
            <p>
                So far we've added our Sorter and Pager components separately to our fruit and veg example. If we tried to use them both together, so that the list can be sorted and paged, then we'd run into a problem. We'd find that when we toggle the sort order we lose the current page number. That's because the Sorter only manages the 'up' data and doesn't know anything about the 'page' data. But we can't pass the page number into the Sorter component because it won't be reusable anymore.
            </p>
            <p>
                The Navigation router comes to our rescue. It keeps track of the current 'page' data so that the Sorter doesn't have to. To ensure that the sorting Hyperlink includes the current page number we set the <code>RefreshLink's includeCurrentData prop</code> to true.
            </p>
            <pre><code class="language-jsx">const Sorter = ({up, children}) => (
  &lt;RefreshLink 
    navigationData={{up: !up}}
    includeCurrentData={true}>
    {children}
  &lt;/RefreshLink>
);</code></pre>
            <p>
                We'll make the same change to the <code>RefreshLinks</code> of the Pager so we don't lose the sort order when changing the page number. We can now use the Sorter and Pager together in the fruit and veg list:
            </p>
            <iframe src="https://codesandbox.io/embed/navigation-sort-and-pager-on-web-5ptizg?fontsize=14&hidenavigation=0&theme=dark"
                style="width:100%; height:300px; border:0; border-radius: 4px; overflow:hidden;"
                title="Navigation Email on Native Web"
                allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
                sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
            ></iframe>
            </p>
        </div>
    </div>
    <script type="text/javascript" src="../js/prism.js"></script>
</body>
</html>