<html>
<head>
    <title>Push Navigation</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../../css/prism.css">
    <link rel="stylesheet" href="../../css/navigation.css">
    <style>
        :root {
          --primary-color: #9cc3d5ff;
          --secondary-color: #0063b2ff;
        }    
      </style>
  </head>
  <body>
      <div id="banner">
        <a href="../../native"><img alt="logo" src="../../img/logo.png" /></a>
        <a href="../setup.html">React</a>
        <a href="https://github.com/grahammendick/navigation">GitHub</a>
      </div>
      <div id="content">
          <div id="menu">
              <h2>
                  <img alt="native" src="../../img/native.png" />
                  React Native
              </h2>
              <div id="items">
                  <a href="setup.html">Setup</a>
                  <a href="hello-world.html">Hello World</a>
                  <a href="push-navigation.html" class="selected">Push Navigation</a>
                  <a href="pop-navigation.html">Pop Navigation</a>
                  <a href="navigation-bar.html">Navigation Bar</a>
                  <a href="tab-bar.html">Tab Bar</a>
                  <a href="sheet.html">Sheet</a>
                  <a href="drawer.html">Drawer</a>
                  <a href="floating-action-button.html">Floating Action Button</a>
                  <a href="scene-navigation-lifecycle.html">Navigation Lifecycle</a>
                  <a href="custom-animation.html">Custom Animation</a>
                  <a href="shared-element-transition.html">Shared Element Transition</a>
                  <a href="deep-links.html">Deep Links</a>
                  <a href="typescript.html">TypeScript</a>
                  <a href="examples.html">Examples</a>
                  <h3>Web</h3>
                  <a href="web/setup.html">Setup</a>
                  <a href="web/browser-history.html">Browser History</a>
                  <a href="web/hyperlinks.html">Hyperlinks</a>
                  <a href="web/examples.html">Examples</a>
              </div>
          </div>
          <div id="article">
            <h1>Push Navigation</h1>
            <h2>Defining States</h2>
            <p>
                After following the <a href="setup.html">Setup instructions</a>, you end up with an empty <code>StateNavigator</code> in <code>App.js</code>. The <code>StateNavigator</code> accepts an array of States that represent the scenes in your application. In an email application, for example, we might have <code>States</code> representing the inbox scene and the scenes for reading and writing a mail. 
            </p>
            <p>
                Both Android and iOS allow a user to navigate back through their stack of visited scenes. The Navigation router manages this stack by dropping a breadcrumb at each visited scene, like the fairy-tale characters Hansel and Gretel. You enable the breadcrumb trail by setting <code>trackCrumbTrail</code> to true against each <code>State</code>. In an email application, we set <code>trackCrumbTrail</code> to true on the 'mail' <code>State</code> so that the user can return to the 'inbox' scene after opening an email.
            </p>
            <pre><code class="language-jsx">const stateNavigator = new StateNavigator([
  {key: 'inbox'},
  {key: 'mail', trackCrumbTrail: true},
  {key: 'compose', trackCrumbTrail: true}
]);</code></pre>
            <h2>Creating Scenes</h2>
            <p>
                Each <code>State</code> needs a matching scene which the <code>NavigationStack</code> displays when that <code>State</code> is active. You wrap each one in a <code>Scene</code> component and pass the key of the <code>State</code> to the <code>stateKey prop</code>. We can create the scenes in our email application using <code>Inbox</code>, <code>Mail</code> and <code>Compose</code> components.
            </p>
                        <pre><code class="language-jsx">import {Scene} from 'navigation-react-native';

&lt;NavigationStack>
  &lt;Scene stateKey="inbox">&lt;Inbox />&lt;/Scene>
  &lt;Scene stateKey="mail">&lt;Mail />&lt;/Scene>
  &lt;Scene stateKey="compose">&lt;Compose />&lt;/Scene>
&lt;/NavigationStack></code></pre>
            <h2>Pushing</h2>
            <p>
                <code>States</code> become active by navigating to them. You navigate to a <code>State</code> by passing the <code>State key</code> to the <code>navigate</code> function of the <code>StateNavigator</code>. You can access the <code>StateNavigator</code> inside any component using the React Context API. In our email example, we can add a button to the 'inbox' scene that navigates to the 'compose' <code>State</code>. Pressing the button pushes the 'compose' scene onto the stack. The user can return to their inbox using the Android back button or by pressing/swiping back on iOS.
            </p>
            <pre><code class="language-jsx">import {NavigationContext} from 'navigation-react';

const Inbox = () => {
  const {stateNavigator} = useContext(NavigationContext);
  return (
    &lt;Button
      title="Compose Mail"
      onPress={() => {
        stateNavigator.navigate('compose');
      }} />
  );
};</code></pre>
            <h2>Passing Data</h2>
            <p>
                You pass data between scenes via the second parameter of the <code>navigate</code> function. You can pass any data of type string, number, boolean and date; or any array of these types. When a user opens an email in our example app, we pass along the selected id to the 'mail' scene.
            </p>
            <pre><code class="language-jsx">&lt;Button
  title="Open Mail"
  onPress={() => {
    stateNavigator.navigate('mail', {id: 12});
  }} /></code></pre>
            <p>
                In the 'mail' scene we get the selected id from the <code>NavigationContext</code>.
            </p>
            <pre><code class="language-jsx">import {NavigationContext} from 'navigation-react';

const Mail = () => {
  const {data} = useContext(NavigationContext); 
  const {id} = data;
}</code></pre>
            <div class="Note">
                <h2>Note</h2>
                Wrap each scene in a <code>SafeAreaView</code> component or a <code>ScrollView</code> component with <code>contentInsetAdjustmentBehavior</code> set to 'automatic' to prevent the iOS navigation bar overlapping the content
            </div>
        </div>
    </div>
    <script type="text/javascript" src="../../js/prism.js"></script>
</body>
</html>