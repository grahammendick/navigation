<html>
<head>
    <title>TypeScript</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../../css/prism.css">
    <link rel="stylesheet" href="../../css/navigation.css">
    <style>
        :root {
          --primary-color: #9cc3d5ff;
          --secondary-color: #0063b2ff;
        }    
      </style>
  </head>
  <body>
      <div id="banner">
        <a href="../../native"><img alt="logo" src="../../img/logo.png" /></a>
        <a href="../setup.html">React</a>
        <a href="https://github.com/grahammendick/navigation">GitHub</a>
      </div>
      <div id="content">
          <div id="menu">
              <h2>
                  <img alt="native" src="../../img/native.png" />
                  React Native
              </h2>
              <div id="items">
                  <a href="setup.html">Setup</a>
                  <a href="hello-world.html">Hello World</a>
                  <a href="push-navigation.html">Push Navigation</a>
                  <a href="pop-navigation.html">Pop Navigation</a>
                  <a href="navigation-bar.html">Navigation Bar</a>
                  <a href="tab-bar.html">Tab Bar</a>
                  <a href="sheet.html">Sheet</a>
                  <a href="drawer.html">Drawer</a>
                  <a href="floating-action-button.html">Floating Action Button</a>
                  <a href="scene-navigation-lifecycle.html">Navigation Lifecycle</a>
                  <a href="custom-animation.html">Custom Animation</a>
                  <a href="shared-element-transition.html">Shared Element Transition</a>
                  <a href="deep-links.html">Deep Links</a>
                  <a href="typescript.html" class="selected">TypeScript</a>
                  <a href="examples.html">Examples</a>
                  <h3>Web</h3>
                  <a href="web/setup.html">Setup</a>
                  <a href="web/browser-history.html">Browser History</a>
                  <a href="web/hyperlinks.html">Hyperlinks</a>
                  <a href="web/examples.html">Examples</a>
              </div>
          </div>
          <div id="article">
            <h1>TypeScript</h1>
            <p>
                To get the most out of the Navigation router's TypeScript support, you create a type that describes the possible navigation in your app. The type is an object whose keys are the valid scenes and whose values list the corresponding navigation data. In our email example, we create a type with keys for the 'inbox' and 'mail' scenes. The 'mail' scene expects a number id for the selected email and an optional boolean that indicates whether to expand the email thread.
            </p>
            <pre><code class="language-js">type EmailNavigation = {
  inbox: null,
  mail: {id: number, expand?: boolean},
}</code></pre>
            <p>
                When we create the <code>StateNavigator</code> we pass our <code>EmailNavigation</code> type as the generic parameter. Then TypeScript will validate our keys are spelt correctly in our configuration and when we map the <code>States</code> to the scenes.
            </p>
            <pre><code class="language-jsx">const stateNavigator = new StateNavigator&lt;EmailNavigation>([
  {key: 'inbox', route: ''},
  {key: 'mail'},
]);

// Error because inbox is mistyped
&lt;NavigationStack>
  &lt;Scene&lt;EmailNavigation> stateKey="inbx">&lt;Inbox />&lt;/Scene>
  &lt;Scene&lt;EmailNavigation> stateKey="mail">&lt;Mail />&lt;/Scene>
&lt;/NavigationStack></code></pre>
            <h2>Navigating and Passing Data</h2>
            <p>
                You can use this same type when you navigate to make sure that the navigation is valid. TypeScript checks the target scene exists and that the navigation data matches up with what that scene expects. The <code>NavigationEvent</code> returned from <code>useContext</code> accepts the type as a generic parameter. When we navigate to the mail scene, for example, TypeScript will tell us if we accidentally pass the id as a string instead of a number.
            </p>
            <pre><code class="language-jsx">import {NavigationEvent} from 'navigation-react'

const {stateNavigator} = useContext&lt;NavigationEvent&lt;EmailNavigation>>(NavigationContext);

// Error because id is a string
&lt;div onClick={() => stateNavigator.navigate('mail', {id: '12'})}>
  Open Mail
&lt;/div></code></pre>
            <p>
                TypeScript will validate the navigation data you receive as long as you tell it the current scene. You pass this as the second generic parameter when using the <code>NavigationContext</code>. In our email example, when we're on the mail scene, TypeScript will point out any mistypings and it knows that 'id' is a number and that 'expand' is a boolean.
            </p>
            <pre><code class="language-jsx">const {data} = useContext&lt;NavigationEvent&lt;EmailNavigation, 'mail'>>(NavigationContext);
// Error because expand is mistyped
const {id, expad} = data;</code></pre>
          </div>
    </div>
    <script type="text/javascript" src="../../js/prism.js"></script>
</body>
</html>
