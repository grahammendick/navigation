<html>
<head>
    <title>Navigation Lifecycle</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../../css/prism.css">
    <link rel="stylesheet" href="../../css/navigation.css">
    <style>
        :root {
          --primary-color: #9cc3d5ff;
          --secondary-color: #0063b2ff;
        }    
      </style>
  </head>
  <body>
      <div id="banner">
        <a href="../../native"><img alt="logo" src="../../img/logo.png" /></a>
        <a href="../setup.html">React</a>
        <a href="https://github.com/grahammendick/navigation">GitHub</a>
      </div>
      <div id="content">
          <div id="menu">
              <h2>
                  <img alt="native" src="../../img/native.png" />
                  React Native
              </h2>
              <div id="items">
                  <a href="setup.html">Setup</a>
                  <a href="hello-world.html">Hello World</a>
                  <a href="push-navigation.html">Push Navigation</a>
                  <a href="pop-navigation.html">Pop Navigation</a>
                  <a href="navigation-bar.html">Navigation Bar</a>
                  <a href="tab-bar.html">Tab Bar</a>
                  <a href="sheet.html">Sheet</a>
                  <a href="drawer.html">Drawer</a>
                  <a href="floating-action-button.html">Floating Action Button</a>
                  <a href="scene-navigation-lifecycle.html" class="selected">Navigation Lifecycle</a>
                  <a href="custom-animation.html">Custom Animation</a>
                  <a href="shared-element-transition.html">Shared Element Transition</a>
                  <a href="deep-links.html">Deep Links</a>
                  <a href="typescript.html">TypeScript</a>
                  <a href="examples.html">Examples</a>
                  <h3>Web</h3>
                  <a href="web/setup.html">Setup</a>
                  <a href="web/browser-history.html">Browser History</a>
                  <a href="web/hyperlinks.html">Hyperlinks</a>
                  <a href="web/examples.html">Examples</a>
              </div>
          </div>
          <div id="article">
            <h1>Navigation Lifecycle</h1>
            <p>
                When the user navigates from scene A to scene B then the first scene isn't unmounted. It's still mounted because it stays in the stack. When the user navigates back then scene B is popped and scene A reappears. The Navigation router has a <code>useNavigated</code> hook that tells you when the user navigates to scene A. It also has a <code>useUnloaded</code> hook that tells you when the user navigates away from scene A to scene B.
            </p>
            <p>
                The 'inbox' scene in our example app polls an endpoint to check if the user has any new mail. We can use the scene lifecycle hooks to make sure we only poll when the user is browsing their inbox. We stop the polling when the user navigates to an email and then start it again when they go back to their inbox.
            </p>
            <pre><code class="language-js">import {useNavigated, useUnloaded} from 'navigation-react-native';

const Inbox = () => (
  useNavigated(() => {
    // Start polling for new emails
  });
  useUnloaded(() => {
    // Stop polling for new emails
  });</code></pre>
            <h2>Peeking Back on iOS</h2>
            <p>
                On iOS, when the user is reading a mail they can half swipe left so they can peek at their inbox without navigating to it. We want to show them their latest mail but we don't want to start polling because they're still on the 'email' scene. The Navigation router has a <code>useNavigating</code> hook that notifies us when the swipe starts. We use this to issue a one-time call to refresh the inbox. If the user completes the swipe the <code>useNavigated</code> fires and we start polling again.
            </p>
            <pre><code class="language-js">import {useNavigating} from 'navigation-react-native';

useNavigating(() => {
  // Fetch new emails
});
</code></pre>
        </div>
    <script type="text/javascript" src="../../js/prism.js"></script>
</body>
</html>